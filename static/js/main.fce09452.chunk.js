(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{11:function(e,t,n){e.exports={content:"IngredientDetails_content__1sSOI",container__attributes:"IngredientDetails_container__attributes__2fYVW",title:"IngredientDetails_title__28rCS",value:"IngredientDetails_value__1mPnt"}},14:function(e,t,n){e.exports={ingredients:"BurgerConstructor_ingredients__3FISq",fillings:"BurgerConstructor_fillings__WRTER",filling:"BurgerConstructor_filling__2Ig8o",constructor__wrapper:"BurgerConstructor_constructor__wrapper__3n8ue"}},167:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(19),a=n.n(i),s=n(80),o=n(16),u=n(33),l=n(3),d=n(81),b=n(82);function j(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var _=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))};function m(e){for(var t=String(e),n=1;t.length<6;n++)t="0"+t;return t}var O=new(function(){function e(){Object(d.a)(this,e),this._base_url="https://norma.nomoreparties.space/api"}return Object(b.a)(e,[{key:"getIngredients",value:function(){return fetch("".concat(this._base_url,"/ingredients/"),{method:"GET",headers:{"Content-type":"application/json"}}).then(_)}},{key:"createOrder",value:function(e){return console.log(e),fetch("".concat(this._base_url,"/orders/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({ingredients:e})}).then(_)}}]),e}()),p="GET_INGREDIENTS_SUCCESS",g="GET_INGREDIENTS_REQUEST",x="GET_INGREDIENTS_FAILED",f="INGREDIENT_COUNT_INCREMENT",h="INGREDIENT_COUNT_DECREMENT",E="INGREDIENT_COUNT_CLEAR",R="INGREDIENT_COUNTS_CLEAR",N="ADD_INGREDIENT_TO_CONSTRUCTOR",C="DELETE_INGREDIENT_FROM_CONSTRUCTOR",A="CLEAR_CONSTRUCTOR",v="DELETE_BUN_FROM_CONSTRUCTOR",y="SORT_INGREDIENTS_IN_CONSTRUCTOR",I="GET_INGREDIENT_INFO",T="CLEAR_INGREDIENT_INFO",S="POST_ORDER_SUCCESS",D="POST_ORDER_REQUEST",k="POST_ORDER_FAILED",w="ADD_INGREDIENT_IN_ORDER",F="DELETE_INGREDIENT_FROM_ORDER",B="CALCULATE_COAST",G="CLEAR_ORDER",J="POST_ORDER_ERROR";var q={coast:0,orderNumber:0,ingredientsOrder:[],orderRequest:!1,orderFailed:!1,orderError:!1},U={},L={items:[]},M={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1},Q=Object(o.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(l.a)(Object(l.a)({},e),{},{ingredientsRequest:!0});case p:return Object(l.a)(Object(l.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!1,ingredients:t.data});case x:return Object(l.a)(Object(l.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});case f:return Object(l.a)(Object(l.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.id?Object(l.a)(Object(l.a)({},e),{},{counter:e.counter+t.counter}):e}))});case h:return Object(l.a)(Object(l.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.id?Object(l.a)(Object(l.a)({},e),{},{counter:e.counter-t.counter}):e}))});case E:return Object(l.a)(Object(l.a)({},e),{},{ingredients:e.ingredients.map((function(e){return"bun"===e.type?Object(l.a)(Object(l.a)({},e),{},{counter:0}):e}))});case R:return Object(l.a)(Object(l.a)({},e),{},{ingredients:e.ingredients.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{counter:0})}))});default:return e}},burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),{},{items:[].concat(Object(u.a)(e.items),[t.item])});case C:return Object(l.a)(Object(l.a)({},e),{},{items:e.items.filter((function(e){return e.uuid!==t.uuid}))});case v:return Object(l.a)(Object(l.a)({},e),{},{items:e.items.filter((function(e){return"bun"!==e.type}))});case y:return Object(l.a)(Object(l.a)({},e),{},{items:t.data});case A:return L;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(l.a)(Object(l.a)({},e),{},{ingredientsOrder:[].concat(Object(u.a)(e.ingredientsOrder),[t.id])});case F:return Object(l.a)(Object(l.a)({},e),{},{ingredientsOrder:e.ingredientsOrder.filter((function(e){return e.id!==t.id}))});case D:return Object(l.a)(Object(l.a)({},e),{},{orderRequest:!0});case S:return Object(l.a)(Object(l.a)({},e),{},{orderFailed:!1,orderRequest:!1,ingredientsOrder:[],orderError:!1,orderNumber:t.number});case k:return Object(l.a)(Object(l.a)({},e),{},{orderFailed:!0,orderRequest:!1});case G:return q;case B:return Object(l.a)(Object(l.a)({},e),{},{coast:t.items.reduce((function(e,t){return"bun"===t.type?e+=2*t.price:e+=t.price}),0)});case J:return Object(l.a)(Object(l.a)({},e),{},{orderError:!0});default:return e}},currentIngredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return t.item;case T:return U;default:return e}}}),V=n(7),Y=(n(97),n(8)),z=n(172),P=n(88),H=n(5),K=n(83),X=n.n(K),W=n(1);var Z=function(e){var t=e.component,n=e.text,r=e.active,c=e.onSetCurrent;return Object(W.jsxs)("a",{className:"".concat(X.a.button," pt-4 pb-4 pr-5 pl-5"),value:n,onClick:function(){return c(n)},children:[Object(W.jsx)(t,{type:"".concat(r===n?"primary":"secondary")}),Object(W.jsx)("p",{className:"text text_type_main-default ml-2 ".concat(r===n?"":"text_color_inactive"),children:n})]})},$=n(20),ee=n.n($);var te=function(){var e=c.a.useState("\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"),t=Object(Y.a)(e,2),n=t[0],r=t[1];function i(e){r(e)}return Object(W.jsx)("header",{className:"".concat(ee.a.header," pt-4 pb-4"),children:Object(W.jsxs)("div",{className:"".concat(ee.a.container),children:[Object(W.jsxs)("ul",{className:"".concat(ee.a.menu," ").concat(ee.a.header__navigation),children:[Object(W.jsx)("li",{className:"".concat(ee.a.menu__item," mr-2"),children:Object(W.jsx)(Z,{onSetCurrent:i,component:H.BurgerIcon,text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",active:n})}),Object(W.jsx)("li",{className:"menu__item",children:Object(W.jsx)(Z,{onSetCurrent:i,component:H.ListIcon,active:n,text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]}),Object(W.jsx)(H.Logo,{}),Object(W.jsx)(Z,{onSetCurrent:i,active:n,component:H.ProfileIcon,text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})},ne=n(21),re=n.n(ne),ce=n(58),ie=n.n(ce);var ae=function(){return Object(W.jsx)("section",{className:"".concat(ie.a.preloader),children:Object(W.jsx)("img",{className:"".concat(ie.a.preloader__circle),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIkAAACQCAYAAAA8/UiaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAxxSURBVHgB7Z3PTxvpGcef57UpTqu2Dukm7aneAlJUFXAqIuVQKfAXhNy2p9DDbkwvmNv2BDm1e4qRuoKoh5JT29OSY0/ALYdUMRCtUBcW97apVokTdhs2npmn7zsGAsY/ZjzvDPMOz0eKkpgBD57v++v5icBoIZ8rZqFnf4IcuAkCxogoC4BZ9TVEqABBhQBWBdqPyl/8pQwGgZAg3AeV+m7MEc7PgUSu/ipVBeE62FQuVxYroBn1nk56vyjfZ/pQFJ1AwDIRlDZ2Fh6CASRCJPmBwpgcpbPyz1jbC+Volr/ynK6HMzzwkRQHznoVRyMItIwWzoQhXp0YLZL84Id5otT9juJoRINYhgcLS/Ln3IGgyHuxhH378xgvQcaKJOgorkOlje0HM+ATbQJ5dx9VC53xuArFSJEMDxTm5F+zoAG5N1ja3Fn8ndfrdb53w51UhYXX4rj0CDCMof6pCdD4kOTJY3J44O59L9cODRYmIRSBuHeStdPwV4ghKTCI/NVCTv71N/knwBLTDLzxXt/o2n9fPKm0u+qnl0Y/0//ex+4CIHfl4vXK85dP1iFGGDWTkC1HMUEOQkBQ+1HsziIhvfdJaA5ihjEiUbOI3D9MQlgg5Ib6795q+WXCaYgCeR+/kkd6iBHGiMS2fR5zuwGx2Ozl+jJHeYiIlNaTU3CMEYmI4IOTxq28a7VtwK5hZAJR+Lb7hIwxIqFIRjJm3/Z8mzv1Kkp/TJTIJaeZWM8KI0RS/8Awkg8t7aRHGl9DpMgfGGLtxxATzJhJMvuxGVXnEeOMaUz0GCGS8lZ0pmpSsR+NrxFWIWKe7n76H4gJBs0kGInzq2bRqYdDSBFbQClWjj6TlptVCB0qbzVxsKVqmWWIEDlzxUokaQiJE+F8KO0MhycEN5aDqkRiWdi05tXr6QA9koouQqhgUzGUK6Xq0EBhFaOyXyAuQYzQHirgN5wPpasebbjnRSzyQa2E+aDeWvD+Vov7UKZyKdIVCBs5iDZ2Ft+HGKF1uVFhhE7P/lNw3ene7BpyozjppGDlIASg/bUA9yAkHIC5rTZCfba9uEqRLHk4BzFDW6jA0C+klxShO1c6QlZaNT+40jeKz188WW11mXLlX+67npWzyQ3QiRy9mzuLtztd9pNL19YFiAKExEEAVGgDoVu0zCRqFkChJWBmdrh/qq2PZnN7YUbrSUcK5K0N414urYcXou9wR6/3UbMhdgJRBBaJ8pCiIE+RXZ5Ap5TPucFFLRFW77iWqf9AIFs+QgY3thdKamkCnXRxH1ESeLm5cnH0vvwlx0AbmHEE5OXS0jKS/avq43319ff6RqHbjawSmRy5t7t5MPK914K8d8ONxFogikCnGzWLOBbsQgjI0TquNoudrrsq76HHhln0GJBUn4FwTi5baxAQ98SDcpntMmKNAEt7Vu+9ijxiQ4wJJJLhwbvT8nhSglDA0oa7//DGgVjG5O7vFoLK3nNy7glLmtnpIMUSAVd1iKMRFdqI4DW0UtmIcNkW9nycc22OE0gkI9JuEVqATAztBZ345eCH+TSIm+Quv6hObDn1OpEys4uK3NyXX7/tfRT3maORYDPJwN2XYcZ5CCtzsWzYB5pEAp5uwg0EilPgzXmma5Ec5MAw54CuRRJFjAdRzytgzpxgy02TAB19UJX3I/EgkEgwRIdXNM40xguBRGIThFapB0lEGujDtCZwPMnwYGFXe46sgTaSJBPYwecQeK7t4Z34xVScZwI7+NwYj0uj78spSUuGHQEtb+4s/gGY2KAlniRVyxS1xHjIZWbPuhDCzMQEQYtI1FG1HuNBXW821WnmtZ25Zppf4zygPRB6eGCqKI8m0943s1R1EOaeffFgHphYEkphvUO3fb3wS4tqANIQJze9S99YmXmePeJN6NUXc7li9ofp70aApOs8RVmLrPX/1X5QYWEwDMMwDMMwfui4cT1sDwLiWMK3lSmzG//80FQkbtJ3z5s78gg70SrQWYUJEOGSKT1bmO45JRI36dtPLomcWYQN43Hv2cJ0zwmzvOrA4KjyCn5c/wg5Jw27nXJ4GXM58gIf9I/5I3QLwkQci+czwXGXG33pmvHt2cJ0j7vckKWrz4rq2aKxwgATCzA/+Pu8Q85T0Ahn3iUL4RBp33Cq4zMwiUFgCIX9iUJKImfOBBFG9wdphIu09QcTLiKq7g+MuQh1bAWGaYMA1F9cn0LNEWaiRsgnqj2dEiFetdGZYAhVsx00Y6HFnuEEIXSXw1Y/y5SCcYw36mZ5jTXba1YYucHMWeJ6gVU+r47itapS8udfLmpfvpiz5ShUQFU5DlLcXwlELl2xrI3OBONEVQEplH/6n1HcNM2Pn20/+ASYRHKq9ISaUS5eHn0o7fVyVqGcqvXe/FulOAD/tGdd+O2/v/xUe5VlJj50jJYfGpi6iejkVZpm/Tvc1mjlPat3nVM1GYZhGIZhGIZhGIZhGIZhGIZhtNK50pFbr4RGgEQOibIqyFkQroPdu8qpnOeDliJRvW6lGKbbJW8hwRLacI+rCCSb05WOrhZyqsqA536/bmNmnNncWeAmRgnlRDyJW6fEhhXw05YEQTVJ/uBK369fPX/xr8fAJI4T5bDcOiVdd8ES91WHbWASR/rwH2oPErQaQIpSqoDNODDG4VbcTO8XEfCWijokcB4J6/tL6nBytCfR1UvPkSJRuTzAGMPRNqPx+buVNTPX3OVGVTvS1WwxRcAFbAyj5TbDray5P+2KxAH7JmiCgAvYmIRaZto+M4LJ+sZVGspAF6i5/SsTLpn99vVpkLKuSBCJC9mcU8pbyhDaukaNtIGV67nApLOeCBfFMQ/RJvMS5w5EgtqqOBPXJjGOje2FkkrThRPFh1R+Fd7e3F5Yq1eEds/Ib3a11E8jnOTOFeaikvFstF4dLx/yzk4yUJgFpaZAUPWthde22OGXKI7M8sLKzAfdTziAJRZI8jjhBR7qn5qQJ53PoAtUhaPN7UU2ySeQEw4+5e4n9F+pSAlkz8rcBiaRNA06Uh3Cv2d7aY7ELeTPA23DF9VOV1rcJutlwA8j1JSHEMtyWVp+XbvwkMtPMAzDMAzDMAzDMAzDMAzDHNAxYVwHKl4Fer7NAaRUVH4F0K6Wud2JMYQqElWRQDr/ZptGY7ticeYPE4CAiS2hiWS4v1CSP32644VuAhCMc2WC+BKKSDwL5AiqWuiMc8et7nFDUHve3EEH84RYFQRrZU2VHrSLZHjgo6JKHge/HKQU8tLjn/pnjrOnYpQ1zdICNKJySgGFjxnkGAcphcD4QiX61wdlkyB29ZmmYCWfk88lAFpFYttygxoop5iKwPhCLgWzHS6Qgw8DDT6tIhGkyhYEAbNc48Q76vTobVA6kxAArSKRR90cBCTtpEeA8YRNXvOkguVTaRUJcE5xpBB6TYEJliqjVySEgU8mBA6fbjyStjJlLwIgwkBHYb0i0dCpvGbry0tOOnVzgejYZrdmB2sOrlUkDlDAxtFU5gxAfxwlezelnvQd9DNNgUZUp/LLfaNj2O0GlsTHz18+4ZnEJ8fb9Mr/VtVgI8C/u+14d/8c2Iqt3eKqjrBpEit+d9REsLS5s+g7e5AJH917ElD+F+k7mPH1TYDlPTvj83uYqAjNC+w1VVROi6XN7QUWSIwJPejI9S0Q3UJQxftUqqg6somK3OQuWxY8DHOjeuiz4DCEYEQSmRYlebkncih9p26Kfrcvkr/oqtzpL0VZheldRJ4UqsFhEIkSyfBAYQ46OLzq7VcyM2GGJDSPyKMqSqOWia1fEiMSLwJ5B5aF1TsehlA63oeBkXjaTzdnQb5/agI8C0RB+TBiVzwJ9SjGo2iMnysRIpGOri4eOBV1Pig34Ao83odhAVbGi8Tt9NVVPXt0Y0JBE27AlR8DIsEkGIL5M4kVIIZFY019uSn1FwcjZxNTlhzjRWIHaHigupOCJpJcn9/8mcTpPoZFpR6AJkg61Xx9gzwSm5IZYLxIUnbvKnQJkbMKmhC1C76MdEEDgaLEeJGo0UjdBDtJe8XmzoOA8S+N94Elr9cHDQSKkkQcgWtpVaDYbxwnzoFmUlbvPfDQpcMmnDQpuEpr0NFZ8fXXT6qXL11/Ls3HE16udz3POwufgGa+qj7e/9mPfvMPR9gZeS83Tr+vmvFw8tnOgrYZLAoS5btxa+MLut86PCG6CtYqVKKnJkYQnbw8RlWJRFn1jgEDSZwXWFEPT4A7qIxb8miqOoOpUfyNlZnnCtb++T84ZjUH58Jk0wAAAABJRU5ErkJggg==",alt:"Preloader"})})},se=n(84),oe=n.n(se),ue=function(e){var t=e.currentTab,n=e.onClick;return Object(W.jsxs)("div",{className:"".concat(oe.a.tabs),children:[Object(W.jsx)(H.Tab,{value:"buns",active:"buns"===t,onClick:function(e){return n(e)},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(W.jsx)(H.Tab,{value:"sauces",active:"sauces"===t,onClick:function(e){return n(e)},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(W.jsx)(H.Tab,{value:"mains",active:"mains"===t,onClick:function(e){return n(e)},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},le=n(28),de=n.n(le),be=n(173),je=n(9),_e=n.n(je),me=(_e.a.shape({_id:_e.a.string.isRequired,name:_e.a.string.isRequired,type:_e.a.string.isRequired,proteins:_e.a.number.isRequired,fat:_e.a.number.isRequired,carbohydrates:_e.a.number.isRequired,calories:_e.a.number.isRequired,price:_e.a.number.isRequired,image:_e.a.string.isRequired,image_mobile:_e.a.string.isRequired,image_large:_e.a.string.isRequired}),n(35)),Oe=n.n(me),pe=function(e){var t=e.card,n=e.onClick,r=t._id,c=Object(V.b)(),i=Object(be.a)({type:"items",item:{_id:r},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),a=Object(Y.a)(i,2),s=a[0].opacity,o=a[1];return Object(W.jsxs)("article",{className:"".concat(Oe.a.card),onClick:function(){console.log(r),c({type:I,item:t}),n()},ref:o,style:{opacity:s},children:[t.counter>0&&Object(W.jsx)(H.Counter,{count:t.counter,size:"default"}),Object(W.jsx)("img",{src:t.image,className:"".concat(Oe.a.card__image),alt:t.name}),Object(W.jsxs)("div",{className:"".concat(Oe.a["card__price-wrapper"]," mt-1 mb-1"),children:[Object(W.jsx)("p",{className:"text text_type_digits-default mr-1",children:t.price}),Object(W.jsx)(H.CurrencyIcon,{type:"primary"})]}),Object(W.jsx)("h3",{className:"text text_type_main-default",children:t.name})]})},ge=function(e){var t=e.title,n=e.cards,r=e.onClick;return Object(W.jsxs)("section",{className:"".concat(de.a.ingredients),children:[Object(W.jsx)("h2",{className:"".concat(de.a.ingredients__title," text text_type_main-medium mt-10 mb-6"),children:t}),Object(W.jsx)("ul",{className:"".concat(de.a.ingredients__list," ml-4 pr-4"),children:n.map((function(e){return Object(W.jsx)("li",{className:"".concat(de.a.ingredients__item),children:Object(W.jsx)(pe,{card:e,onClick:r})},e._id)}))})]})};var xe=function(e){var t=e.onClick,n=Object(V.c)((function(e){return{ingredients:e.ingredients.ingredients,ingredientsRequest:e.ingredients.ingredientsRequest,ingredientsFailed:e.ingredients.ingredientsFailed}})),c=n.ingredients,i=n.ingredientsRequest,a=Object(r.useState)("buns"),s=Object(Y.a)(a,2),o=s[0],u=s[1],l=Object(r.useRef)(),d=Object(r.useRef)(),b=Object(r.useRef)(),j=Object(r.useRef)(),_=c.filter((function(e){return"bun"===e.type})),m=c.filter((function(e){return"sauce"===e.type})),O=c.filter((function(e){return"main"===e.type})),p=function(){var e=l.current.getBoundingClientRect().top,t=d.current.getBoundingClientRect().top,n=b.current.getBoundingClientRect().top,r=j.current.getBoundingClientRect().top,c=Math.abs(e-t),i=Math.abs(e-n),a=Math.abs(e-r);switch(!0){case c<i&&c<a:u("buns");break;case i<c&&i<a:u("sauces");break;default:u("mains")}};Object(r.useEffect)((function(){if(!i){var e=document.querySelector(".scroll-container");return e.addEventListener("scroll",p),function(){e.removeEventListener("scroll",p)}}}),[i]);var g=Object(r.useMemo)((function(){return i?Object(W.jsx)(ae,{}):Object(W.jsxs)("ul",{className:"".concat(re.a.ingredients__groups," scroll-container"),ref:l,children:[Object(W.jsx)("li",{className:"".concat(re.a.ingredients__group),ref:d,children:Object(W.jsx)(ge,{title:"\u0411\u0443\u043b\u043a\u0438",cards:_,onClick:t})}),Object(W.jsx)("li",{className:"".concat(re.a.ingredients__group),ref:b,children:Object(W.jsx)(ge,{title:"\u0421\u043e\u0443\u0441\u044b",cards:m,onClick:t})}),Object(W.jsx)("li",{className:"".concat(re.a.ingredients__group),ref:j,children:Object(W.jsx)(ge,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",cards:O,onClick:t})})]})}),[_,O,i,t,m]);return Object(W.jsxs)("section",{className:"".concat(re.a.ingredients," mr-10"),children:[Object(W.jsx)(ue,{currentTab:o,onClick:function(e){u(e)}}),g]})},fe=n(86),he=n.n(fe),Ee=n(174),Re=n(87),Ne=n.n(Re),Ce=function(e){var t=e.id,n=e.index,c=e.moveCard,i=e.item,a=Object(V.b)(),s=Object(r.useRef)(null),o=Object(Ee.a)({accept:"card",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(s.current){console.log(e);var i=e.index,a=n;if(i!==a){var o=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),u=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;i<a&&l<u||i>a&&l>u||(c(i,a),e.index=a)}}}}),u=Object(Y.a)(o,2),l=u[0].handlerId,d=u[1],b=Object(be.a)({type:"card",item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(Y.a)(b,2),_=j[0].isDragging?.3:1;(0,j[1])(d(s));return Object(W.jsxs)("li",{className:"".concat(Ne.a.filling," mb-2"),style:{opacity:_},ref:s,index:n,"data-handler-id":l,children:[Object(W.jsx)(H.DragIcon,{type:"primary"}),Object(W.jsx)(H.ConstructorElement,{text:i.name,price:i.price,thumbnail:i.image_mobile,handleClose:function(){return function(e,t){a({type:C,uuid:e}),a({type:h,id:t,counter:1}),a({type:F,id:t})}(i.uuid,i._id)}})]})},Ae=n(14),ve=n.n(Ae),ye=function(e){var t=e.onClick,n=Object(V.b)(),c=Object(V.c)((function(e){return{ingredients:e.ingredients.ingredients,ingredientsConstructor:e.burgerConstructor.items,error:e.order.orderError,coast:e.order.coast}})),i=c.ingredients,a=c.ingredientsConstructor,s=c.error,o=c.coast,u=Object(Ee.a)({accept:"items",drop:function(e){var t=function(e){return Object(l.a)(Object(l.a)({},e),{},{uuid:j()})}(i.find((function(t){return t._id===e._id})));"bun"===t.type&&a.some((function(e){return"bun"===e.type}))&&(n({type:v}),n({type:E}),n({type:F,id:t._id})),n({type:N,item:t}),n({type:w,id:t._id}),n({type:f,id:t._id,counter:"bun"===t.type?2:1})},collect:function(e){return{isHover:e.isOver()}}}),d=Object(Y.a)(u,2),b=d[0].isHover,_=d[1],m=b?"lightgreen":"transparent";Object(r.useEffect)((function(){n({type:B,items:a})}),[a,n]);var p=Object(r.useCallback)((function(e,t){var r=a[e],c=he()(a,{$splice:[[e,1],[t,0,r]]});n({type:y,data:c})}),[a,n]);return Object(W.jsxs)("section",{className:"mt-3 mb-13",children:[Object(W.jsxs)("ul",{className:"".concat(ve.a.ingredients," mb-10 pr-4 pl-4"),ref:_,style:{borderColor:m},children:[Object(W.jsx)("li",{className:"".concat(ve.a.ingredient," ml-6 mb-2"),children:a.filter((function(e){return"bun"===e.type})).length>0&&a.filter((function(e){return"bun"===e.type})).map((function(e){return Object(W.jsx)(H.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(e.name," (\u0432\u0435\u0440\u0445)"),price:e.price,thumbnail:e.image_mobile},e.uuid)}))}),Object(W.jsx)("li",{className:"".concat(ve.a.ingredient," mb-2"),children:Object(W.jsx)("ul",{className:"".concat(ve.a.fillings),children:a.filter((function(e){return"sauce"===e.type||"main"===e.type})).length>0&&a.filter((function(e){return"sauce"===e.type||"main"===e.type})).map((function(e,t){return Object(W.jsx)(Ce,{moveCard:p,id:e.uuid,item:e,index:t+1},e.uuid)}))})}),Object(W.jsx)("li",{className:"".concat(ve.a.ingredient," ml-6"),children:a.filter((function(e){return"bun"===e.type})).length>0&&a.filter((function(e){return"bun"===e.type})).map((function(e){return Object(W.jsx)(H.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(e.name," (\u043d\u0438\u0437)"),price:e.price,thumbnail:e.image_mobile},e.uuid)}))})]}),s&&Object(W.jsx)("p",{className:"".concat(ve.a.constructor__error," text text_type_main-medium"),children:"\u0427\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437, \u0441\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0431\u0443\u0440\u0433\u0435\u0440!"}),Object(W.jsxs)("div",{className:"".concat(ve.a.constructor__wrapper," mb-13"),children:[Object(W.jsxs)("div",{className:"".concat(ve.a.constructor__wrapper," mr-10"),children:[Object(W.jsx)("p",{className:"text text_type_digits-medium",children:o}),Object(W.jsx)(H.CurrencyIcon,{type:"primary"})]}),Object(W.jsx)(H.Button,{type:"primary",size:"large",onClick:function(){n({type:T});var e=[];a.forEach((function(t){e.push(t._id)})),e.length>0?(t(),n(function(e){return function(t){t({type:D}),e.length&&O.createOrder(e).then((function(e){t({type:S,number:e.order.number}),t({type:R})})).catch((function(){t({type:k})}))}}(e))):n({type:J})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Ie=n(60),Te=n.n(Ie),Se=n(61),De=n.n(Se),ke=function(e){var t=e.isOpened,n=e.onClose,r=e.children;return Object(W.jsx)("div",{className:"".concat(De.a.modal," ").concat(t&&De.a.modal_show),onMouseDown:function(e){e.target===e.currentTarget&&t&&n()},children:r})},we=document.getElementById("modal-root"),Fe=function(e){var t=e.isOpened,n=e.children,r=e.onClose;e.modalOrder;return c.a.useEffect((function(){if(t){var e=function(e){"Escape"===e.key&&r()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[t,r]),a.a.createPortal(Object(W.jsx)(ke,{isOpened:t,onClose:r,children:Object(W.jsxs)("div",{className:"".concat(Te.a["modal-body"]),children:[Object(W.jsx)("button",{type:"button",onClick:r,className:"".concat(Te.a.close)}),n]})}),we)},Be=n(11),Ge=n.n(Be),Je=function(e){var t=e.isOpened,n=e.onClose,r=Object(V.c)((function(e){return{card:e.currentIngredient}})).card;return null!==r?Object(W.jsx)(Fe,{isOpened:t,onClose:n,children:Object(W.jsxs)("div",{className:"".concat(Ge.a.content," pt-10 pl-10 pb-15"),children:[Object(W.jsx)("h2",{className:"".concat(Ge.a.title," text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(W.jsx)("img",{className:"".concat(Ge.a.container__image," mb-4"),src:r.image_large,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 ".concat(r.name)}),Object(W.jsx)("p",{className:"text text_type_main-medium mb-8",children:r.name}),Object(W.jsxs)("ul",{className:"".concat(Ge.a.container__attributes," mb-15"),children:[Object(W.jsxs)("li",{className:"".concat(Ge.a.container__attribute),children:[Object(W.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(W.jsx)("p",{className:"".concat(Ge.a.value," text text_type_digits-default text_color_inactive"),children:r.calories})]}),Object(W.jsxs)("li",{className:"".concat(Ge.a.container__attribute," ml-5"),children:[Object(W.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(W.jsx)("p",{className:"".concat(Ge.a.value," text text_type_digits-default text_color_inactive"),children:r.proteins})]}),Object(W.jsxs)("li",{className:"".concat(Ge.a.container__attribute," ml-5"),children:[Object(W.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u0438, \u0433"}),Object(W.jsx)("p",{className:"".concat(Ge.a.value," text text_type_digits-default text_color_inactive"),children:r.fat})]}),Object(W.jsxs)("li",{className:"".concat(Ge.a.container__attribute," ml-5"),children:[Object(W.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(W.jsx)("p",{className:"".concat(Ge.a.value," text text_type_digits-default text_color_inactive"),children:r.carbohydrates})]})]})]})}):Object(W.jsx)(W.Fragment,{children:" "})},qe=n(36),Ue=n.n(qe),Le=n.p+"static/media/done.e036971b.png",Me=function(e){var t=e.isOpened,n=e.onClose,r=e.modalOrder,c=Object(V.c)((function(e){return{number:e.order.orderNumber}})).number;return Object(W.jsx)(Fe,{isOpened:t,onClose:function(){n()},modalOrder:r,children:Object(W.jsxs)("div",{className:"".concat(Ue.a.container__content," pb-30 pt-20"),children:[Object(W.jsx)("p",{className:"".concat(Ue.a["order-number"]," text text_type_digits-large mb-8"),children:m(c)}),Object(W.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(W.jsx)("img",{className:"".concat(Ue.a.container__icon," mb-15"),src:Le,alt:"\u0418\u043a\u043e\u043d\u043a\u0430"}),Object(W.jsx)("p",{className:"text text_type_main-small ",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(W.jsx)("p",{className:"text text_type_main-small text_color_inactive mt-2 ",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},Qe=n(37),Ve=n.n(Qe);var Ye=function(){var e=c.a.useState(!1),t=Object(Y.a)(e,2),n=t[0],i=t[1],a=Object(V.b)(),s=c.a.useState(!1),o=Object(Y.a)(s,2),u=o[0],d=o[1],b=c.a.useState(!1),j=Object(Y.a)(b,2),_=j[0],m=j[1],f=function(){m(!1),d(!1),n&&(a({type:G}),a({type:A}),i(!1))};return Object(r.useEffect)((function(){a((function(e){e({type:g}),O.getIngredients().then((function(t){var n=[];t.data.map((function(e){return n.push(Object(l.a)(Object(l.a)({},e),{},{counter:0}))})),e({type:p,data:n})})).catch((function(){e({type:x})}))}))}),[a]),Object(W.jsxs)("div",{className:"".concat(Ve.a.app),children:[Object(W.jsx)(te,{}),Object(W.jsx)(z.a,{backend:P.a,children:Object(W.jsxs)("main",{className:"".concat(Ve.a.main," pb-13"),children:[Object(W.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(W.jsxs)("div",{className:"".concat(Ve.a.main__container),children:[Object(W.jsx)(xe,{onClick:function(){d(!0)}}),Object(W.jsx)(ye,{onClick:function(){i(!0),m(!0)}})]})]})}),Object(W.jsx)(Je,{modalOrder:n,isOpened:u,onClose:f}),Object(W.jsx)(Me,{modalOrder:n,isOpened:_,onClose:f})]})},ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,175)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))},Pe=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):o.c)(Object(o.a)(s.a)),He=Object(o.d)(Q,Pe);a.a.render(Object(W.jsx)(c.a.StrictMode,{children:Object(W.jsx)(V.a,{store:He,children:Object(W.jsx)(Ye,{})})}),document.getElementById("root")),ze()},20:function(e,t,n){e.exports={header:"AppHeader_header__R1Ju4",container:"AppHeader_container__2k0vk",menu:"AppHeader_menu__2y1mZ",menu__link:"AppHeader_menu__link__1dLOY"}},21:function(e,t,n){e.exports={ingredients:"BurgerIngredients_ingredients__1RZMV",ingredients__groups:"BurgerIngredients_ingredients__groups__3tdwH",constructor__error:"BurgerIngredients_constructor__error__1QUk1"}},28:function(e,t,n){e.exports={ingredients__list:"IngredientsList_ingredients__list__1rBjh"}},35:function(e,t,n){e.exports={card:"IngredientCard_card__2cvlv","card__price-wrapper":"IngredientCard_card__price-wrapper__3GZwx"}},36:function(e,t,n){e.exports={container__content:"OrderDetails_container__content__3rkV3","order-number":"OrderDetails_order-number__zYBVK"}},37:function(e,t,n){e.exports={main:"App_main__1h6xZ",main__container:"App_main__container__2Egxi"}},58:function(e,t,n){e.exports={preloader:"Preloader_preloader__1ihBl",preloader__circle:"Preloader_preloader__circle__WFhxI",spin:"Preloader_spin__J40JB"}},60:function(e,t,n){e.exports={"modal-body":"Modal_modal-body__3PBCe",close:"Modal_close__2aAfS"}},61:function(e,t,n){e.exports={modal:"ModalOverlay_modal__8zj0c",modal_show:"ModalOverlay_modal_show__3mLdl"}},83:function(e,t,n){e.exports={button:"HeaderButton_button__GdsEP",button__text:"HeaderButton_button__text__3nU9a",button__text_active:"HeaderButton_button__text_active__1FbqU"}},84:function(e,t,n){e.exports={tabs:"Tabs_tabs__egITS"}},87:function(e,t,n){e.exports={filling:"FilingConstructor_filling__2vetL"}},97:function(e,t,n){}},[[167,1,2]]]);
//# sourceMappingURL=main.fce09452.chunk.js.map